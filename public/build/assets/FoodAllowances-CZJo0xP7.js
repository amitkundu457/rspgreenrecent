import{q as j,r as l,W as N,j as e,a as g}from"./app-D84j7SCT.js";import{H as v,N as f}from"./Header-C3uwYM-0.js";import"./index-D4x-ylCN.js";import"./iconBase-Cc3CELI8.js";import"./index-TAr1_Bl1.js";function R({user:m,notif:x,allEmployees:d,us:n}){const{travelAllowances:r}=j().props,[o,u]=l.useState(null),[w,c]=l.useState(!1);l.useState(!1),l.useState(null),l.useState("");const{data:s,setData:t,post:h,put:y,delete:_,processing:p,reset:i}=N({id:"",employee_id:"",amount:"",destination:"",travel_date:"",reason:"",document_path:null,payment_by:"",payment_mode:"Cash",extra_payment:""}),b=a=>{a.preventDefault(),o?y(route("travel-allowances.update",s.id),{onSuccess:()=>{i(),u(null),c(!1)}}):h(route("travel-allowances.store"),{onSuccess:()=>{i(),c(!1)}})};return e.jsxs("div",{className:"w-[85%] absolute right-0 overflow-hidden bg-gray-100 min-h-screen",children:[e.jsx(v,{user:m,notif:x}),e.jsx(f,{}),e.jsxs("div",{className:"p-8 bg-white rounded-b-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Food Allowances Advance"}),e.jsx(g,{href:"/foodreq",children:e.jsxs("button",{className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"+"})," ",n!==1?"Add Request for Payment":"Show all Payment Request"]})})]}),n===1&&e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("select",{value:s.employee_id,onChange:a=>t("employee_id",a.target.value),required:!0,className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select Employee"}),d==null?void 0:d.map(a=>e.jsx("option",{value:a.id,children:a.employee_name},a.id))]}),e.jsx("input",{type:"number",placeholder:"Advance Payment",value:s.amount,onChange:a=>t("amount",a.target.value),required:!0,className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"text",placeholder:"Destination",value:s.destination,onChange:a=>t("destination",a.target.value),required:!0,className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"date",value:s.travel_date,onChange:a=>t("travel_date",a.target.value),required:!0,className:"w-full p-2 border rounded-md"}),e.jsx("textarea",{placeholder:"Reason",value:s.reason,onChange:a=>t("reason",a.target.value),className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"text",placeholder:"Payment By",value:s.payment_by,onChange:a=>t("payment_by",a.target.value),className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"file",onChange:a=>t("document_path",a.target.files[0]),className:"w-full p-2 border rounded-md"}),e.jsx("button",{type:"submit",className:`w-full p-2 text-white rounded-md ${p?"bg-gray-400":"bg-blue-500 hover:bg-blue-600"}`,disabled:p,children:o?"Update":"Create"})]})]}),n!==1&&(r==null?void 0:r.length)>0&&e.jsxs("div",{className:"overflow-y-auto max-h-[400px] mt-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"All Travel Allowances"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2",children:"Employee Id"}),e.jsx("th",{className:"border px-4 py-2",children:"Employee Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Advance Payment"}),e.jsx("th",{className:"border px-4 py-2",children:"Date"}),e.jsx("th",{className:"border px-4 py-2",children:"Reason"}),e.jsx("th",{className:"border px-4 py-2",children:"Destination"}),e.jsx("th",{className:"border px-4 py-2",children:"Payment By"}),e.jsx("th",{className:"border px-4 py-2",children:"Payment Mode"}),e.jsx("th",{className:"border px-4 py-2",children:"Extra Payment"}),e.jsx("th",{className:"border px-4 py-2",children:"Status"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:r.length>0?r.map(a=>e.jsxs("tr",{className:"border",children:[e.jsxs("td",{className:"border px-4 py-2",children:["EMP0000",a.id]}),e.jsx("td",{className:"border px-4 py-2",children:a.employee_name}),e.jsxs("td",{className:"border px-4 py-2",children:["Rs ",a.amount]}),e.jsx("td",{className:"border px-4 py-2",children:a.travel_date}),e.jsx("td",{className:"border px-4 py-2",children:a.reason}),e.jsx("td",{className:"border px-4 py-2",children:a.destination}),e.jsx("td",{className:"border px-4 py-2",children:a.payment_by}),e.jsx("td",{className:"border px-4 py-2",children:a.payment_mode}),e.jsx("td",{className:"border px-4 py-2",children:a.extra_payment||"N/A"}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded ${a.status==="Approved"?"bg-green-500 text-white":a.status==="Rejected"?"bg-red-500 text-white":"bg-gray-300"}`,children:a.status})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-4",children:"No travel allowances found."})})})]})]})]})}export{R as default};
