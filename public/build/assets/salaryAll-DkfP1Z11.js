import{r as C,c as ae,j as s,a as ie}from"./app-D84j7SCT.js";import{H as ce,N as de}from"./Header-C3uwYM-0.js";import ue from"./SalarySlip-BDd44KsG.js";import"./index-D4x-ylCN.js";import"./iconBase-Cc3CELI8.js";import"./index-TAr1_Bl1.js";import"./jspdf.es.min-B659mMef.js";var oe={exports:{}};(function(K,ee){(function(q,E){K.exports=E(C)})(typeof self<"u"?self:ae,function(q){return function(){var E={155:function(t){t.exports=q}},$={};function v(t){var e=$[t];if(e!==void 0)return e.exports;var n=$[t]={exports:{}};return E[t](n,n.exports,v),n.exports}v.d=function(t,e){for(var n in e)v.o(e,n)&&!v.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},v.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},v.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var P={};v.r(P),v.d(P,{useReactToPrint:function(){return Q}});var W=v(155);function d({level:t="error",messages:e,suppressErrors:n=!1}){n||(t==="error"?console.error(e):t==="warning"?console.warn(e):console.debug(e))}function M(t,e){if(e||!t){const n=document.getElementById("printWindow");n&&document.body.removeChild(n)}}function j(t){return t instanceof Error?t:new Error("Unknown Error")}function B(t,e){const{documentTitle:n,onAfterPrint:a,onPrintError:u,preserveAfterPrint:c,print:m,suppressErrors:p}=e;setTimeout(()=>{var g,w;if(t.contentWindow)if(t.contentWindow.focus(),m)m(t).then(()=>{a==null||a(),M(c)}).catch(N=>{u?u("print",j(N)):d({messages:["An error was thrown by the specified `print` function"],suppressErrors:p})});else{if(t.contentWindow.print){const N=(w=(g=t.contentDocument)===null||g===void 0?void 0:g.title)!==null&&w!==void 0?w:"",A=t.ownerDocument.title;n&&(t.ownerDocument.title=n,t.contentDocument&&(t.contentDocument.title=n)),t.contentWindow.print(),n&&(t.ownerDocument.title=A,t.contentDocument&&(t.contentDocument.title=N))}else d({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:p});window.addEventListener("focus",()=>{a==null||a(),M(c)},{once:!0})}else d({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:p})},500)}function V(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null);let a=n.nextNode();for(;a;)e.push(a),a=n.nextNode();return e}function L(t,e,n){const a=V(t),u=V(e);if(a.length===u.length)for(let c=0;c<a.length;c++){const m=a[c],p=u[c],g=m.shadowRoot;if(g!==null){const w=p.attachShadow({mode:g.mode});w.innerHTML=g.innerHTML,L(g,w,n)}}else d({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",t,e],suppressErrors:n})}const D=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function G(t,e,n,a){var u,c,m,p,g;const{contentNode:w,clonedContentNode:N,clonedImgNodes:A,clonedVideoNodes:U,numResourcesToLoad:Y,originalCanvasNodes:I}=n,{bodyClass:z,fonts:F,ignoreGlobalStyles:H,pageStyle:O,nonce:x,suppressErrors:R,copyShadowRoots:J}=a;t.onload=null;const r=(u=t.contentDocument)!==null&&u!==void 0?u:(c=t.contentWindow)===null||c===void 0?void 0:c.document;if(r){const k=r.body.appendChild(N);J&&L(w,k,!!R),F&&(!((m=t.contentDocument)===null||m===void 0)&&m.fonts&&(!((p=t.contentWindow)===null||p===void 0)&&p.FontFace)?F.forEach(l=>{const o=new FontFace(l.family,l.source,{weight:l.weight,style:l.style});t.contentDocument.fonts.add(o),o.loaded.then(()=>{e(o)}).catch(f=>{e(o,["Failed loading the font:",o,"Load error:",j(f)])})}):(F.forEach(l=>{e(l)}),d({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:R})));const X=O??D,Z=r.createElement("style");x&&(Z.setAttribute("nonce",x),r.head.setAttribute("nonce",x)),Z.appendChild(r.createTextNode(X)),r.head.appendChild(Z),z&&r.body.classList.add(...z.split(" "));const re=r.querySelectorAll("canvas");for(let l=0;l<I.length;++l){const o=I[l],f=re[l];if(f===void 0){d({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",o],suppressErrors:R});continue}const i=f.getContext("2d");i&&i.drawImage(o,0,0)}for(let l=0;l<A.length;l++){const o=A[l],f=o.getAttribute("src");if(f){const i=new Image;i.onload=()=>{e(o)},i.onerror=(h,y,T,b,S)=>{e(o,["Error loading <img>",o,"Error",S])},i.src=f}else e(o,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',o])}for(let l=0;l<U.length;l++){const o=U[l];o.preload="auto";const f=o.getAttribute("poster");if(f){const i=new Image;i.onload=()=>{e(o)},i.onerror=(h,y,T,b,S)=>{e(o,["Error loading video poster",f,"for video",o,"Error:",S])},i.src=f}else o.readyState>=2?e(o):o.src?(o.onloadeddata=()=>{e(o)},o.onerror=(i,h,y,T,b)=>{e(o,["Error loading video",o,"Error",b])},o.onstalled=()=>{e(o,["Loading video stalled, skipping",o])}):e(o,["Error loading video, `src` is empty",o])}const te="select",ne=w.querySelectorAll(te),se=r.querySelectorAll(te);for(let l=0;l<ne.length;l++)se[l].value=ne[l].value;if(!H){const l=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let o=0,f=l.length;o<f;++o){const i=l[o];if(i.tagName.toLowerCase()==="style"){const h=r.createElement(i.tagName),y=i.sheet;if(y){let T="";try{const b=y.cssRules.length;for(let S=0;S<b;++S)typeof y.cssRules[S].cssText=="string"&&(T+=`${y.cssRules[S].cssText}\r
`)}catch(b){d({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",i,`Original error: ${j(b).message}`],level:"warning"})}h.setAttribute("id",`react-to-print-${o}`),x&&h.setAttribute("nonce",x),h.appendChild(r.createTextNode(T)),r.head.appendChild(h)}}else if(i.getAttribute("href"))if(i.hasAttribute("disabled"))d({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",i],level:"warning"}),e(i);else{const h=r.createElement(i.tagName);for(let y=0,T=i.attributes.length;y<T;++y){const b=i.attributes[y];b&&h.setAttribute(b.nodeName,(g=b.nodeValue)!==null&&g!==void 0?g:"")}h.onload=()=>{e(h)},h.onerror=(y,T,b,S,le)=>{e(h,["Failed to load",h,"Error:",le])},x&&h.setAttribute("nonce",x),r.head.appendChild(h)}else d({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",i],level:"warning"}),e(i)}}}Y===0&&B(t,a)}function _(t,e,n,a){t.onload=()=>{G(t,e,n,a)},document.body.appendChild(t)}function Q(t){const{contentRef:e,fonts:n,ignoreGlobalStyles:a,onBeforePrint:u,onPrintError:c,preserveAfterPrint:m,suppressErrors:p}=t;return(0,W.useCallback)(w=>{M(m,!0);const N=function({contentRef:r,optionalContent:k,suppressErrors:X}){return k&&(r&&d({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof k=="function")?k():r?r.current:void d({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:X})}({contentRef:e,optionalContent:w,suppressErrors:p});if(!N)return void d({messages:["There is nothing to print"],suppressErrors:p});const A=N.cloneNode(!0),U=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Y=A.querySelectorAll("img"),I=A.querySelectorAll("video"),z=n?n.length:0,F=(a?0:U.length)+Y.length+I.length+z,H=[],O=[],x=function(){const r=document.createElement("iframe");return r.width=`${document.documentElement.clientWidth}px`,r.height=`${document.documentElement.clientHeight}px`,r.style.position="absolute",r.style.top=`-${document.documentElement.clientHeight+100}px`,r.style.left=`-${document.documentElement.clientWidth+100}px`,r.id="printWindow",r.srcdoc="<!DOCTYPE html>",r}(),R=(r,k)=>{H.includes(r)?d({level:"debug",messages:["Tried to mark a resource that has already been handled",r],suppressErrors:p}):(k?(d({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...k],suppressErrors:p}),O.push(r)):H.push(r),H.length+O.length===F&&B(x,t))},J={contentNode:N,clonedContentNode:A,clonedImgNodes:Y,clonedVideoNodes:I,numResourcesToLoad:F,originalCanvasNodes:N.querySelectorAll("canvas")};u?u().then(()=>{_(x,R,J,t)}).catch(r=>{c==null||c("onBeforePrint",j(r))}):_(x,R,J,t)},[t])}return P}()})})(oe);var pe=oe.exports;const we=({user:K,notif:ee,user_type:q,salary:E,deductions:$,deductionsss:v,combinedData:P,employees:W})=>{const[d,M]=C.useState("All Employees"),[j,B]=C.useState("2025-01"),[V,L]=C.useState([]),[D,G]=C.useState(null),_=C.useRef();console.log("ggggg",P);const Q=W.reduce((e,n)=>(e[n.id]={name:n.name,type:n.employee_type},e),{});C.useEffect(()=>{(()=>{const n=E==null?void 0:E.map(a=>{const u=new Date(a.generate_date),c=new Date(u.getFullYear(),u.getMonth()+1,0).getDate(),m=parseFloat(a.total_amount),p=m/c,g=m/(c*8);return{...a,perDaySalary:p.toFixed(2),hourlySalary:g.toFixed(2)}});L(n)})()},[E]);const t=()=>{const e=E.filter(n=>{var c;const a=d==="All Employees"||n.employee_id===((c=W.find(m=>m.name===d))==null?void 0:c.id),u=!j||n.generate_date.startsWith(j);return a&&u});L(e)};return pe.useReactToPrint({content:()=>_.current}),s.jsxs("div",{className:"flex flex-col w-full ml-[11.5rem]",children:[s.jsx(ce,{user:K,notif:ee}),s.jsx(de,{user_type:q}),s.jsx("div",{className:"px-[5rem] py-4 w-full",children:D?s.jsxs("div",{children:[s.jsx("button",{className:"bg-gray-500 text-white p-2 rounded mt-4 ml-2",onClick:()=>G(null),children:"Back to List"}),s.jsx("div",{ref:_,children:s.jsx(ue,{combinedData:[D],deductions:$,signatureName:D.employeeName,salary:E,data:P,employeeId:D.employeeId})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("select",{className:"border p-2 rounded",value:d,onChange:e=>M(e.target.value),children:[s.jsx("option",{value:"All Employees",children:"All Employees"}),W.map(e=>s.jsx("option",{value:e.name,children:e.name},e.id))]}),s.jsx("input",{type:"month",className:"border p-2 rounded",value:j,onChange:e=>B(e.target.value)}),s.jsx("button",{className:"bg-blue-500 text-white p-2 rounded",onClick:t,children:"Search"})]}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"border p-2",children:"Employee Name"}),s.jsx("th",{className:"border p-2",children:"Salary Generate Date"}),s.jsx("th",{className:"border p-2",children:"Net Amount"}),s.jsx("th",{className:"border p-2",children:"Action"})]})}),s.jsx("tbody",{children:V.map(e=>{const n=Q[e.employee_id];return console.log("jhgf",n),s.jsxs("tr",{children:[s.jsx("td",{className:"border p-2",children:n?n.name:"Pinaki Ray"}),s.jsx("td",{className:"border p-2",children:e.generate_date}),s.jsx("td",{className:"border p-2",children:e.total_amount}),s.jsxs("td",{className:"border p-2",children:[s.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded mr-2",onClick:()=>G({...e,employeeName:n?n.name:"Unknown Employee",employeeType:n?n.type:"Unknown Type",employeeId:e.employee_id,deductions:v}),title:"View salary details",children:"View Details"}),s.jsx(ie,{href:`/all-salary/print/${e.employee_id}`,className:"bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded",title:"Download PDF",children:"PDF"})]})]},e.id)})})]})]})})]})};export{we as default};
