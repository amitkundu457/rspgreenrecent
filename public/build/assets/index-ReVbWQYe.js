import{W as D,r as d,b as o,j as e,a as F}from"./app-D84j7SCT.js";import{c as S,e as q,f as A}from"./index-D4x-ylCN.js";import{H as I,N as M}from"./Header-C3uwYM-0.js";import"./iconBase-Cc3CELI8.js";import"./index-TAr1_Bl1.js";const B=({clients:j,user:N,notif:f,user_type:g})=>{const{data:s,setData:c,post:P,put:T,reset:y,processing:w}=D({id:null,client_name:"",client_address:"",client_phone_no:"",client_work_order:"",work_order_date:"",document:null}),[i,n]=d.useState([]),[m,p]=d.useState(!1),[k,h]=d.useState(!1);d.useEffect(()=>{_()},[]);const _=async()=>{try{const r=await o.get("/clients-workOrder");n(r.data)}catch(r){console.error("Error fetching work orders:",r)}},l=r=>{const{name:a,value:t,files:u}=r.target;c(u?b=>({...b,[a]:u[0]}):b=>({...b,[a]:t}))},v=async r=>{r.preventDefault(),m?await E():await C()},C=async()=>{try{const r=new FormData;Object.keys(s).forEach(t=>{r.append(t,s[t])});const a=await o.post("/clients-workOrder",r);n([...i,a.data]),x()}catch(r){console.error("Error creating work order:",r)}},E=async()=>{try{const r=new FormData;Object.keys(s).forEach(t=>{r.append(t,s[t])});const a=await o.put(`/clients-workOrder/${s.id}`,r);n(i.map(t=>t.id===s.id?a.data:t)),x()}catch(r){console.error("Error updating work order:",r)}},x=()=>{y(),p(!1),h(!1)},O=r=>{c(r),p(!0),h(!0)},W=async r=>{try{await o.delete(`/clients-workOrder/${r}`),n(i.filter(a=>a.id!==r))}catch(a){console.error("Error deleting work order:",a)}};return e.jsxs("div",{className:"w-[85%] absolute right-0 overflow-hidden bg-gray-100 min-h-screen",children:[e.jsx(I,{user:N,notif:f}),e.jsx(M,{user_type:g}),e.jsxs("div",{className:"p-8 bg-white rounded-b-md",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Manage Work Orders"}),e.jsx("button",{onClick:()=>h(!0),className:"mb-4 bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600",children:"Create Client Work Order"}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:""}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Name"}),e.jsx("input",{type:"text",name:"client_name",value:s.client_name,onChange:l,className:"border w-full p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Address"}),e.jsx("input",{type:"text",name:"client_address",value:s.client_address,onChange:l,className:"border w-full p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Phone No"}),e.jsx("input",{type:"text",name:"client_phone_no",value:s.client_phone_no,onChange:l,className:"border w-full p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Work Title"}),e.jsx("input",{type:"text",name:"client_work_order",value:s.client_work_order,onChange:l,className:"border w-full p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Work Order Date"}),e.jsx("input",{type:"date",name:"work_order_date",value:s.work_order_date,onChange:l,className:"border w-full p-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Document"}),e.jsx("input",{type:"file",name:"document",onChange:l,className:"border w-full p-2 rounded"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:x,className:"bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",disabled:w,children:m?"Update":"Create"})]})]})]})}),e.jsxs("table",{className:"w-full border text-left bg-white rounded shadow",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:"Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Address"}),e.jsx("th",{className:"border px-4 py-2",children:"Phone No"}),e.jsx("th",{className:"border px-4 py-2",children:"Work Order Title"}),e.jsx("th",{className:"border px-4 py-2",children:"Work Order Date"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-4 py-2",children:r.client_name}),e.jsx("td",{className:"border px-4 py-2",children:r.client_address}),e.jsx("td",{className:"border px-4 py-2",children:r.client_phone_no}),e.jsx("td",{className:"border px-4 py-2",children:r.client_work_order}),e.jsx("td",{className:"border px-4 py-2",children:r.work_order_date}),e.jsxs("td",{className:"border px-4 py-2 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(r),className:"text-blue-500 hover:text-blue-600",children:e.jsx(S,{})}),e.jsx("button",{onClick:()=>W(r.id),className:"text-red-500 hover:text-red-600",children:e.jsx(q,{})}),e.jsx(F,{href:`/clients-workOrder/${r.id}/show`,className:"text-gray-500 hover:text-gray-700",children:e.jsx(A,{})})]})]},r.id))})]})]})]})};export{B as default};
