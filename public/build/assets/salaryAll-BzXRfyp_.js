import{r as C,c as ae,j as s,a as ie}from"./app-Cn1PjxUx.js";import{H as ce,N as de}from"./Nav-BNNd6Nrg.js";import ue from"./SalarySlip-D7HFMjdm.js";import"./iconBase-BPFLjw48.js";import"./index-BxkI7NKl.js";import"./index-mSteYAay.js";import"./jspdf.es.min-BfNj8eKz.js";var ne={exports:{}};(function(J,ee){(function(O,D){J.exports=D(C)})(typeof self<"u"?self:ae,function(O){return function(){var D={155:function(t){t.exports=O}},S={};function v(t){var e=S[t];if(e!==void 0)return e.exports;var o=S[t]={exports:{}};return D[t](o,o.exports,v),o.exports}v.d=function(t,e){for(var o in e)v.o(e,o)&&!v.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},v.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},v.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var R={};v.r(R),v.d(R,{useReactToPrint:function(){return G}});var K=v(155);function c({level:t="error",messages:e,suppressErrors:o=!1}){o||(t==="error"?console.error(e):t==="warning"?console.warn(e):console.debug(e))}function W(t,e){if(e||!t){const o=document.getElementById("printWindow");o&&document.body.removeChild(o)}}function j(t){return t instanceof Error?t:new Error("Unknown Error")}function $(t,e){const{documentTitle:o,onAfterPrint:a,onPrintError:d,preserveAfterPrint:u,print:g,suppressErrors:p}=e;setTimeout(()=>{var m,w;if(t.contentWindow)if(t.contentWindow.focus(),g)g(t).then(()=>{a==null||a(),W(u)}).catch(E=>{d?d("print",j(E)):c({messages:["An error was thrown by the specified `print` function"],suppressErrors:p})});else{if(t.contentWindow.print){const E=(w=(m=t.contentDocument)===null||m===void 0?void 0:m.title)!==null&&w!==void 0?w:"",A=t.ownerDocument.title;o&&(t.ownerDocument.title=o,t.contentDocument&&(t.contentDocument.title=o)),t.contentWindow.print(),o&&(t.ownerDocument.title=A,t.contentDocument&&(t.contentDocument.title=E))}else c({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:p});window.addEventListener("focus",()=>{a==null||a(),W(u)},{once:!0})}else c({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:p})},500)}function q(t){const e=[],o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null);let a=o.nextNode();for(;a;)e.push(a),a=o.nextNode();return e}function M(t,e,o){const a=q(t),d=q(e);if(a.length===d.length)for(let u=0;u<a.length;u++){const g=a[u],p=d[u],m=g.shadowRoot;if(m!==null){const w=p.attachShadow({mode:m.mode});w.innerHTML=m.innerHTML,M(m,w,o)}}else c({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",t,e],suppressErrors:o})}const L=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function Q(t,e,o,a){var d,u,g,p,m;const{contentNode:w,clonedContentNode:E,clonedImgNodes:A,clonedVideoNodes:V,numResourcesToLoad:Y,originalCanvasNodes:_}=o,{bodyClass:z,fonts:P,ignoreGlobalStyles:H,pageStyle:I,nonce:x,suppressErrors:F,copyShadowRoots:U}=a;t.onload=null;const r=(d=t.contentDocument)!==null&&d!==void 0?d:(u=t.contentWindow)===null||u===void 0?void 0:u.document;if(r){const T=r.body.appendChild(E);U&&M(w,T,!!F),P&&(!((g=t.contentDocument)===null||g===void 0)&&g.fonts&&(!((p=t.contentWindow)===null||p===void 0)&&p.FontFace)?P.forEach(l=>{const n=new FontFace(l.family,l.source,{weight:l.weight,style:l.style});t.contentDocument.fonts.add(n),n.loaded.then(()=>{e(n)}).catch(f=>{e(n,["Failed loading the font:",n,"Load error:",j(f)])})}):(P.forEach(l=>{e(l)}),c({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:F})));const X=I??L,Z=r.createElement("style");x&&(Z.setAttribute("nonce",x),r.head.setAttribute("nonce",x)),Z.appendChild(r.createTextNode(X)),r.head.appendChild(Z),z&&r.body.classList.add(...z.split(" "));const re=r.querySelectorAll("canvas");for(let l=0;l<_.length;++l){const n=_[l],f=re[l];if(f===void 0){c({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",n],suppressErrors:F});continue}const i=f.getContext("2d");i&&i.drawImage(n,0,0)}for(let l=0;l<A.length;l++){const n=A[l],f=n.getAttribute("src");if(f){const i=new Image;i.onload=()=>{e(n)},i.onerror=(h,b,k,y,N)=>{e(n,["Error loading <img>",n,"Error",N])},i.src=f}else e(n,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',n])}for(let l=0;l<V.length;l++){const n=V[l];n.preload="auto";const f=n.getAttribute("poster");if(f){const i=new Image;i.onload=()=>{e(n)},i.onerror=(h,b,k,y,N)=>{e(n,["Error loading video poster",f,"for video",n,"Error:",N])},i.src=f}else n.readyState>=2?e(n):n.src?(n.onloadeddata=()=>{e(n)},n.onerror=(i,h,b,k,y)=>{e(n,["Error loading video",n,"Error",y])},n.onstalled=()=>{e(n,["Loading video stalled, skipping",n])}):e(n,["Error loading video, `src` is empty",n])}const te="select",oe=w.querySelectorAll(te),se=r.querySelectorAll(te);for(let l=0;l<oe.length;l++)se[l].value=oe[l].value;if(!H){const l=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let n=0,f=l.length;n<f;++n){const i=l[n];if(i.tagName.toLowerCase()==="style"){const h=r.createElement(i.tagName),b=i.sheet;if(b){let k="";try{const y=b.cssRules.length;for(let N=0;N<y;++N)typeof b.cssRules[N].cssText=="string"&&(k+=`${b.cssRules[N].cssText}\r
`)}catch(y){c({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",i,`Original error: ${j(y).message}`],level:"warning"})}h.setAttribute("id",`react-to-print-${n}`),x&&h.setAttribute("nonce",x),h.appendChild(r.createTextNode(k)),r.head.appendChild(h)}}else if(i.getAttribute("href"))if(i.hasAttribute("disabled"))c({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",i],level:"warning"}),e(i);else{const h=r.createElement(i.tagName);for(let b=0,k=i.attributes.length;b<k;++b){const y=i.attributes[b];y&&h.setAttribute(y.nodeName,(m=y.nodeValue)!==null&&m!==void 0?m:"")}h.onload=()=>{e(h)},h.onerror=(b,k,y,N,le)=>{e(h,["Failed to load",h,"Error:",le])},x&&h.setAttribute("nonce",x),r.head.appendChild(h)}else c({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",i],level:"warning"}),e(i)}}}Y===0&&$(t,a)}function B(t,e,o,a){t.onload=()=>{Q(t,e,o,a)},document.body.appendChild(t)}function G(t){const{contentRef:e,fonts:o,ignoreGlobalStyles:a,onBeforePrint:d,onPrintError:u,preserveAfterPrint:g,suppressErrors:p}=t;return(0,K.useCallback)(w=>{W(g,!0);const E=function({contentRef:r,optionalContent:T,suppressErrors:X}){return T&&(r&&c({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof T=="function")?T():r?r.current:void c({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:X})}({contentRef:e,optionalContent:w,suppressErrors:p});if(!E)return void c({messages:["There is nothing to print"],suppressErrors:p});const A=E.cloneNode(!0),V=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Y=A.querySelectorAll("img"),_=A.querySelectorAll("video"),z=o?o.length:0,P=(a?0:V.length)+Y.length+_.length+z,H=[],I=[],x=function(){const r=document.createElement("iframe");return r.width=`${document.documentElement.clientWidth}px`,r.height=`${document.documentElement.clientHeight}px`,r.style.position="absolute",r.style.top=`-${document.documentElement.clientHeight+100}px`,r.style.left=`-${document.documentElement.clientWidth+100}px`,r.id="printWindow",r.srcdoc="<!DOCTYPE html>",r}(),F=(r,T)=>{H.includes(r)?c({level:"debug",messages:["Tried to mark a resource that has already been handled",r],suppressErrors:p}):(T?(c({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...T],suppressErrors:p}),I.push(r)):H.push(r),H.length+I.length===P&&$(x,t))},U={contentNode:E,clonedContentNode:A,clonedImgNodes:Y,clonedVideoNodes:_,numResourcesToLoad:P,originalCanvasNodes:E.querySelectorAll("canvas")};d?d().then(()=>{B(x,F,U,t)}).catch(r=>{u==null||u("onBeforePrint",j(r))}):B(x,F,U,t)},[t])}return R}()})})(ne);var pe=ne.exports;const we=({user:J,notif:ee,user_type:O,employees:D,salary:S,deductions:v,deductionsss:R,combinedData:K})=>{const[c,W]=C.useState("All Employees"),[j,$]=C.useState("2025-01"),[q,M]=C.useState([]),[L,Q]=C.useState(null),B=C.useRef(),G=D.reduce((e,o)=>(e[o.id]=o.name,e),{});C.useEffect(()=>{(()=>{const o=S==null?void 0:S.map(a=>{const d=new Date(a.generate_date),u=new Date(d.getFullYear(),d.getMonth()+1,0).getDate(),g=parseFloat(a.total_amount),p=g/u,m=g/(u*8);return{...a,perDaySalary:p.toFixed(2),hourlySalary:m.toFixed(2)}});M(o)})()},[S]);const t=()=>{const e=S.filter(o=>{const a=c==="All Employees"||G[o==null?void 0:o.employee_id]===c,d=!j||o.generate_date.startsWith(j);return a&&d});M(e)};return pe.useReactToPrint({}),s.jsxs("div",{className:"flex flex-col w-full ml-[11.5rem]",children:[s.jsx(ce,{user:J,notif:ee}),s.jsx(de,{user_type:O}),s.jsx("div",{className:"px-[5rem] py-4 w-full",children:L?s.jsx("div",{children:s.jsx("div",{ref:B,children:s.jsx(ue,{combinedData:[L],deductions:v,signatureName:L.employeeName,salary:S,data:K})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("select",{className:"border p-2 rounded",value:c,onChange:e=>W(e.target.value),children:[s.jsx("option",{value:"All Employees",children:"All Employees"}),D.map(e=>s.jsx("option",{value:e.name,children:e.name},e.id))]}),s.jsx("input",{type:"month",className:"border p-2 rounded",value:j,onChange:e=>$(e.target.value)}),s.jsx("button",{className:"bg-blue-500 text-white p-2 rounded",onClick:t,children:"Search"})]}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"border p-2",children:"Salary Generate Date"}),s.jsx("th",{className:"border p-2",children:"Generate Date"}),s.jsx("th",{className:"border p-2",children:"Status"}),s.jsx("th",{className:"border p-2",children:"Total Amount"}),s.jsx("th",{className:"border p-2",children:"Action"})]})}),s.jsx("tbody",{children:q.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"border p-2",children:e.salary_name}),s.jsx("td",{className:"border p-2",children:e.generate_date}),s.jsx("td",{className:"border p-2",children:e.status}),s.jsx("td",{className:"border p-2",children:e.total_amount}),s.jsxs("td",{className:"border p-2",children:[s.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded mr-2",onClick:()=>Q({...e,employeeName:G[e.employee_id],deductions:R}),title:"View salary details",children:"View Details"}),s.jsx(ie,{href:`/all-salary/print/${e.employee_id}`,className:"bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded",onClick:()=>console.log(`Navigating to salary with ID: ${e.id}`),title:"Download PDF",children:"PDF"})]})]},e.id))})]})]})})]})};export{we as default};
