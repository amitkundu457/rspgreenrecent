import{q as C,r,W as A,j as e,a as D}from"./app-DcosoOGz.js";import{H as E,N as R}from"./Header-CpISEJT8.js";import"./index-BdICc8gQ.js";import"./iconBase-BoGeFUZy.js";import"./index-CWrYJs3k.js";function I({user:j,notif:N,allEmployees:d,us:o}){const{travelAllowances:n}=C().props,[i,g]=r.useState(null),[q,u]=r.useState(!1);r.useState(!1),r.useState(null),r.useState("");const[c,p]=r.useState(!1),[v,f]=r.useState({expenseAmount:"",expenseReason:"",expenseReceipt:null}),x=new FormData,w=async a=>{a.preventDefault();const l=new FormData;l.append("amount",s.amount),l.append("reason",s.reason);try{await axios.post("/store-expense",l),alert("Successfully submitted!")}catch(m){console.error("Error submitting form",m)}},h=a=>{const{name:l,value:m}=a.target;f({...v,[l]:m})},{data:s,setData:t,post:S,put:_,delete:k,processing:b,reset:y}=A({id:"",employee_id:"",employee_name:"",employee_id:"",amount:"",destination:"",travel_date:"",reason:"",document:null,document_path:null,payment_by:"",payment_mode:"Cash",extra_payment:""}),P=a=>{a.preventDefault(),i?_(route("travel-allowances.update",s.id),{onSuccess:()=>{y(),g(null),u(!1)}}):S(route("travel-allowances.store"),{onSuccess:()=>{y(),u(!1)}})};return e.jsxs("div",{className:"w-[85%] absolute right-0 overflow-hidden bg-gray-100 min-h-screen",children:[e.jsx(E,{user:j,notif:N}),e.jsx(R,{}),e.jsxs("div",{className:"p-8 bg-white rounded-b-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Travel Allowances Advance"}),e.jsx(D,{href:"/travelreq",children:e.jsxs("button",{className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"+"})," ",o!==1?"Add Request for Payment":"Show all Payment Request"]})})]}),o===1&&e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("select",{value:s.employee_id,onChange:a=>t("employee_id",a.target.value),required:!0,className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select Employee"}),d==null?void 0:d.map(a=>e.jsx("option",{value:a.id,children:a.employee_name},a.id))]}),e.jsx("input",{type:"number",placeholder:"Advance Payment",value:s.amount,onChange:a=>t("amount",a.target.value),required:!0,className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"text",placeholder:"Destination",value:s.destination,onChange:a=>t("destination",a.target.value),required:!0,className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"date",value:s.travel_date,onChange:a=>t("travel_date",a.target.value),required:!0,className:"w-full p-2 border rounded-md"}),e.jsx("textarea",{placeholder:"Reason",value:s.reason,onChange:a=>t("reason",a.target.value),className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"text",placeholder:"Payment By",value:s.payment_by,onChange:a=>t("payment_by",a.target.value),className:"w-full p-2 border rounded-md"}),e.jsx("input",{type:"file",onChange:a=>t("document_path",a.target.files[0]),className:"w-full p-2 border rounded-md"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-semibold",children:"Extra Payment:"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"extraPayment",value:"yes",checked:c,onChange:()=>p(!0)}),e.jsx("span",{children:"Yes"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"extraPayment",value:"no",checked:!c,onChange:()=>p(!1)}),e.jsx("span",{children:"No"})]})]}),c&&e.jsx("input",{type:"number",placeholder:"Extra Payment Amount",value:s.extra_payment||"",onChange:a=>t("extra_payment",a.target.value),className:"w-full p-2 border rounded-md"}),e.jsx("button",{type:"submit",className:`w-full p-2 text-white rounded-md ${b?"bg-gray-400":"bg-blue-500 hover:bg-blue-600"}`,disabled:b,children:i?"Update":"Create"})]})]}),o!==1&&(n==null?void 0:n.length)>0&&e.jsxs("div",{className:"w-[97%] absolute right-0 overflow-hidden bg-gray-100 min-h-screen",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"All Travel Allowances"}),e.jsxs("div",{className:"p-4 bg-white shadow rounded-lg mt-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Submit Travel Expense"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:x.amount,onChange:h,className:"w-full p-2 border rounded mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold",children:"Reason"}),e.jsx("textarea",{name:"reason",value:x.reason,onChange:h,className:"w-full p-2 border rounded mt-1",required:!0})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Submit Expense"})]})]}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-4 py-2",children:"Employee Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Advance Payment"}),e.jsx("th",{className:"border px-4 py-2",children:"Date"}),e.jsx("th",{className:"border px-4 py-2",children:"Reason"}),e.jsx("th",{className:"border px-4 py-2",children:"Destination"}),e.jsx("th",{className:"border px-4 py-2",children:"Extra Payment"}),e.jsx("th",{className:"border px-4 py-2",children:"Status"})]})}),e.jsx("tbody",{children:n.length>0?n.map(a=>e.jsxs("tr",{className:"border",children:[e.jsxs("td",{className:"border px-4 py-2",children:[a.employee_name,"Pinaki Ray"]}),e.jsxs("td",{className:"border px-4 py-2",children:["Rs ",a.amount]}),e.jsx("td",{className:"border px-4 py-2",children:a.travel_date}),e.jsx("td",{className:"border px-4 py-2",children:a.reason}),e.jsx("td",{className:"border px-4 py-2",children:a.destination}),e.jsx("td",{className:"border px-4 py-2",children:a.extra_payment||"N/A"}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded ${a.status==="Approved"?"bg-green-500 text-white":a.status==="Rejected"?"bg-red-500 text-white":"bg-gray-300 text-black"}`,children:a.status||"Pending"})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-4",children:"No travel allowances found."})})})]})]})]})}export{I as default};
