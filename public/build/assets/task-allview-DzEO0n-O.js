import{r as c,j as e}from"./app-DcosoOGz.js";import{H as v,N as T,e as k}from"./Header-CpISEJT8.js";import{G as g}from"./iconBase-BoGeFUZy.js";import"./index-BdICc8gQ.js";import"./index-CWrYJs3k.js";function w(r){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"},child:[]}]})(r)}function E(r){return g({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"},child:[]}]})(r)}const M=({allEmployees:r,tasksss:m,tls:h})=>{const[s,u]=c.useState([]),[y,n]=c.useState(!1),[a,o]=c.useState(null),[i,d]=c.useState({employeeId:"",taskTime:""}),p=s.reduce((t,l)=>t+l.taskTime,0),j=()=>{const t=r.find(l=>l.id.toString()===i.employeeId);if(t&&i.taskTime){const l=Number(i.taskTime),b=p+l-(a!==null?s[a].taskTime:0);if(b>m.estimate_hours){alert(`Estimated hours exceeded! Total time is ${b}, exceeding the limit of ${m.estimate_hours}.`);return}let x=[...s];a!==null?x[a]={...t,taskTime:l}:x.push({...t,taskTime:l}),u(x),d({employeeId:"",taskTime:""}),n(!1),o(null)}else alert("Please select an employee and enter a valid task time.")},f=t=>{u(s.filter(l=>l.id!==t))},N=t=>{d({employeeId:s[t].id.toString(),taskTime:s[t].taskTime.toString()}),o(t),n(!0)};return e.jsxs("div",{className:"flex flex-col w-full md:w-[85%] ml-[12rem]",children:[e.jsx(v,{}),e.jsx(T,{}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 ml-8",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800",children:"Manage Employees"}),e.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-all",onClick:()=>{d({employeeId:"",taskTime:""}),o(null),n(!0)},children:"Add Employee"})]}),e.jsxs("div",{className:"flex items-center justify-start ml-8 mb-8 p-4 bg-blue-100 border-l-4 border-blue-500 rounded-lg shadow-md",children:[e.jsx(k,{className:"text-blue-600 text-3xl mr-3"}),e.jsxs("p",{className:"text-xl font-semibold text-gray-800",children:[e.jsxs("span",{className:"text-blue-700 font-bold",children:["Team Leader:"," "]}),h.length>0?h[0].name:"N/A"]})]}),e.jsxs("table",{className:"min-w-full bg-white shadow-lg rounded-lg ml-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-200",children:[e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Employee Name"}),e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Task Time (hours)"}),e.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Department"}),e.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:s.map((t,l)=>e.jsxs("tr",{className:"border-b hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 px-4",children:t.employee_name}),e.jsxs("td",{className:"py-3 px-4",children:[t.taskTime," hours"]}),e.jsx("td",{className:"py-3 px-4",children:t.designation_name}),e.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-3",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:()=>N(l),children:e.jsx(E,{size:20})}),e.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>f(t.id),children:e.jsx(w,{size:20})})]})]},l))})]}),e.jsx("div",{className:"bg-white shadow-lg rounded-lg ml-4 mt-6 p-4",children:e.jsxs("p",{className:"text-xl font-semibold text-gray-700",children:["Total time: ",m.estimate_hours," / Total Task Time:"," ",e.jsx("span",{className:"text-blue-500",children:p})," ","hours"]})}),y&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-96",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:a!==null?"Edit Employee":"Add Employee"}),e.jsx("label",{className:"block mb-2 text-gray-700",children:"Employee Name:"}),e.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-lg",value:i.employeeId,onChange:t=>d({...i,employeeId:t.target.value}),disabled:a!==null,children:[e.jsx("option",{value:"",children:"Select Employee"}),r.map(t=>e.jsxs("option",{value:t.id,children:[t.employee_name," -"," ",t.designation_name]},t.id))]}),e.jsx("label",{className:"block mt-4 mb-2 text-gray-700",children:"Task Time (hours):"}),e.jsx("input",{type:"number",className:"w-full p-3 border border-gray-300 rounded-lg",value:i.taskTime,onChange:t=>d({...i,taskTime:t.target.value})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500",onClick:()=>{n(!1),o(null)},children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",onClick:j,children:a!==null?"Update":"Save"})]})]})})]})]})};export{M as default};
