import{W as S,r as n,b as c,j as e,a as D}from"./app-D84j7SCT.js";import{c as F,e as q,f as A}from"./index-D4x-ylCN.js";import{H as I,N as M}from"./Header-C3uwYM-0.js";import"./iconBase-Cc3CELI8.js";import"./index-TAr1_Bl1.js";const B=({workOrders:o,user:u,notif:j,user_type:f})=>{const{data:a,setData:d,post:O,put:$,reset:y,processing:g}=S({id:null,seller_name:"",seller_address:"",date_of_wo:"",subject:"",contact_person_name:"",job_details:"",task:"",quantity:"",uom:"",rate:"",amount:""}),[m,p]=n.useState(!1),[N,i]=n.useState(!1),[z,l]=n.useState(!1);n.useEffect(()=>{w()},[]);const w=async()=>{try{const s=await c.get("/seller-work-orders");l(s.data)}catch(s){console.error("Error fetching work orders:",s)}},_=s=>{const{name:r,value:t,files:b}=s.target;d(b?x=>({...x,[r]:b[0]}):x=>({...x,[r]:t}))},v=async s=>{s.preventDefault(),m?await E():await k()},k=async()=>{try{const s=new FormData;Object.keys(a).forEach(t=>{s.append(t,a[t])});const r=await c.post("/seller-work-orders",s);l([...o,r.data]),h()}catch(s){console.error("Error creating work order:",s)}},E=async()=>{try{const s=new FormData;Object.keys(a).forEach(t=>{s.append(t,a[t])});const r=await c.put(`/seller-work-orders/${a.id}`,s);l(o.map(t=>t.id===a.id?r.data:t)),h()}catch(s){console.error("Error updating work order:",s)}},h=()=>{y(),p(!1),i(!1)},C=s=>{d(s),p(!0),i(!0)},W=async s=>{try{await c.delete(`/seller-work-orders/${s}`),l(o.filter(r=>r.id!==s))}catch(r){console.error("Error deleting work order:",r)}};return e.jsxs("div",{className:"w-[85%] absolute right-0 overflow-hidden bg-gray-100 min-h-screen",children:[e.jsx(I,{user:u,notif:j}),e.jsx(M,{user_type:f}),e.jsxs("div",{className:"p-8 bg-white rounded-b-md",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Manage saler Work Orders"}),e.jsx("button",{onClick:()=>i(!0),className:"mb-4 bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600",children:"Create seller Work Order"}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded shadow-md w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:v,children:[["seller_name","seller_address","date_of_wo","subject","contact_person_name","job_details","task","quantity","rate","amount"].map((s,r)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 capitalize",children:s.replace(/_/g," ")}),e.jsx("input",{type:s==="date_of_wo"?"date":"text",name:s,value:a[s],onChange:_,className:"border w-full p-2 rounded",required:!0})]},r)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:h,className:"bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",disabled:g,children:m?"Update":"Create"})]})]})})}),e.jsxs("table",{className:"w-full border text-left bg-white rounded shadow",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2",children:"Seller Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Address"}),e.jsx("th",{className:"border px-4 py-2",children:"Date of WO"}),e.jsx("th",{className:"border px-4 py-2",children:"Subject"}),e.jsx("th",{className:"border px-4 py-2",children:"Contact Person"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border px-4 py-2",children:s.seller_name}),e.jsx("td",{className:"border px-4 py-2",children:s.seller_address}),e.jsx("td",{className:"border px-4 py-2",children:s.date_of_wo}),e.jsx("td",{className:"border px-4 py-2",children:s.subject}),e.jsx("td",{className:"border px-4 py-2",children:s.contact_person_name}),e.jsxs("td",{className:"border px-4 py-2 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(s),className:"text-blue-500 hover:text-blue-600",children:e.jsx(F,{})}),e.jsx("button",{onClick:()=>W(s.id),className:"text-red-500 hover:text-red-600",children:e.jsx(q,{})}),e.jsx(D,{href:`/seller-workOrder/${s.id}/show`,className:"text-gray-500 hover:text-gray-700",children:e.jsx(A,{})})]})]},s.id))})]})]})]})};export{B as default};
