import{r as i,j as e,b as f}from"./app-Cn1PjxUx.js";import{M as y}from"./Modal-DCVdT3X0.js";import{H as W,N as L}from"./Nav-BNNd6Nrg.js";import{u as P}from"./index-B7AX3bCm.js";import{b as R}from"./index-BxkI7NKl.js";import{F as N,a as U}from"./index-mSteYAay.js";import{N as X}from"./notyf.min-DLu_xjpT.js";import"./transition-tnE1nn9p.js";import"./iconBase-BPFLjw48.js";import"./index-D7OHuJnf.js";const d=new X,le=({user:g,notif:b,user_type:v,documents:q,employees:m,attendances:r})=>{const[_,o]=i.useState(!1),[w,x]=i.useState(!1),[C,A]=i.useState(),{post:D,put:F,data:a,setData:l,processing:z,errors:B}=P({employee_id:"",date:"",in_time:"",out_time:"",total_time:""});async function S(t){A(t),await f.get(`/attendances/${t}`).then(s=>{l({employee_id:s.data.employee_id,date:s.data.date,in_time:s.data.in_time,out_time:s.data.out_time})})}const u=t=>{const[s,c]=t.split(":"),n=new Date;return n.setHours(s,c),n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})};function E(t){t.preventDefault(),D(route("attendances.store"),{onSuccess(){d.success("Attendance Added")}})}function k(t){t.preventDefault(),F(`/attendances/${C}`,{onSuccess(){d.success("Attendance updated")}})}async function H(t){try{await f.delete(`/attendances/${t}`),d.success("Attendance deleted successfully.")}catch(s){console.error(s)}}function M(t,s){const[c,n]=t.split(":").map(Number),[T,I]=s.split(":").map(Number),h=new Date;h.setHours(c,n);const p=new Date;p.setHours(T,I);const j=(p-h)/1e3/60,O=Math.floor(j/60),$=j%60;return`${O}h ${$}m`}return e.jsxs("div",{className:"w-[85.2%] ml-[11.5rem]",children:[e.jsx(W,{user:g,notif:b}),e.jsx(L,{user_type:v}),e.jsx(y,{show:_,maxWidth:"lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg",children:"Create Attendance"}),e.jsx("button",{onClick:()=>o(!1),children:e.jsx(N,{})})]}),e.jsx("hr",{}),e.jsx("div",{className:"py-4",children:e.jsxs("form",{onSubmit:E,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Employee"}),e.jsxs("select",{name:"employee_id",onChange:t=>l("employee_id",t.target.value),value:a.employee_id,className:"form-select rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),m.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Attendance Date"}),e.jsx("input",{type:"date",name:"date",onChange:t=>l("date",t.target.value),value:a.date,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"In Time"}),e.jsx("input",{type:"time",name:"in_time",onChange:t=>l("in_time",t.target.value),value:a.in_time,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Out Time"}),e.jsx("input",{type:"time",name:"out_time",onChange:t=>l("out_time",t.target.value),value:a.out_time,className:"form-input rounded text-sm"})]}),e.jsx("div",{className:"flex justify-center text-sm gap-y-2",children:e.jsx("button",{type:"submit",className:"py-2 px-5 rounded bg-blue-500 text-white",children:"Submit"})})]})})]})}),e.jsxs("div",{className:"w-full px-9",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl px-9",children:"Manage Attendance"}),e.jsx("div",{className:"text-sm px-4 py-2 rounded bg-gray-200",children:e.jsx("strong",{children:"Office Hours: 10:00 AM - 7:00 PM"})}),e.jsx("button",{onClick:()=>o(!0),className:"text-sm px-4 py-2 rounded text-white bg-blue-500",children:"Create Attendance"})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-4 rounded-l",children:"#"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Employee Name"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Attendance Date"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Clock In"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Clock Out"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Working Hours"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2 rounded-r",children:"Action"})]})}),e.jsx("tbody",{children:r&&r.map((t,s)=>e.jsx(i.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-sm",children:s+1}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:t.name}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:u(t.in_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:u(t.out_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:M(t.in_time,t.out_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>{x(!0),S(t.id)},className:"px-2 py-2 bg-blue-500 rounded text-white",children:e.jsx(U,{})}),e.jsx("button",{onClick:()=>H(t.id),className:"px-2 py-2 bg-red-500 rounded text-white",children:e.jsx(R,{})})]})})]})},s))})]}),e.jsx(y,{show:w,maxWidth:"lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg",children:"Edit Attendance"}),e.jsx("button",{onClick:()=>x(!1),children:e.jsx(N,{})})]}),e.jsx("hr",{}),e.jsx("div",{className:"py-4",children:e.jsxs("form",{onSubmit:k,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Employee"}),e.jsxs("select",{name:"employee_id",onChange:t=>l("employee_id",t.target.value),value:a.employee_id,className:"form-select rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),m.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Attendance Date"}),e.jsx("input",{type:"date",onChange:t=>l("date",t.target.value),value:a.date,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"In Time"}),e.jsx("input",{type:"time",onChange:t=>l("in_time",t.target.value),value:a.in_time,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Out Time"}),e.jsx("input",{type:"time",onChange:t=>l("out_time",t.target.value),value:a.out_time,className:"form-input rounded text-sm"})]}),e.jsx("div",{className:"flex justify-center text-sm gap-y-2",children:e.jsx("button",{type:"submit",className:"py-2 px-5 rounded bg-blue-500 text-white",children:"Submit"})})]})})]})})]})]})]})};export{le as default};
