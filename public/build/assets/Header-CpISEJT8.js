import{j as e,a as p,r,q as M}from"./app-DcosoOGz.js";import{s as B,t as F,u as R,v as k,w as H,x as V,y as I,z as P}from"./index-BdICc8gQ.js";import{G as c}from"./iconBase-BoGeFUZy.js";import{e as N,f as E}from"./index-CWrYJs3k.js";function $({active:a=!1,className:o="",children:l,...v}){return e.jsx(p,{...v,className:`w-full flex items-start  text-[0.9rem]  text-[0.9rem]  font-medium focus:outline-none transition duration-150 ease-in-out ${o}`,children:l})}function D(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8c1.57 0 3.04.46 4.28 1.25l1.45-1.45A10.02 10.02 0 0 0 12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.73 0 3.36-.44 4.78-1.22l-1.5-1.5c-1 .46-2.11.72-3.28.72zm7-5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z"},child:[]}]})(a)}function X(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(a)}function Z(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7a2.5 2.5 0 0 0 0 5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"},child:[]}]})(a)}function O(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 20V8.35L13.65 4h-2.83L16 9.18V20h2zm4 0V6.69L19.31 4h-2.83L20 7.52V20h2zM8 4l-6 6v10h5v-5h2v5h5V10L8 4zm1 9H7v-2h2v2z"},child:[]}]})(a)}function T(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",x2:"9",y1:"12",y2:"12"},child:[]}]})(a)}function S(a){return c({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:"currentColor"},child:[]}]})(a)}function u({icon:a,name:o,items:l,user:v}){const[m,j]=r.useState(!1),[t,d]=r.useState(0),h=r.useRef(null),{props:g}=M();r.useEffect(()=>{d(m?h.current.scrollHeight:0)},[m]);const w=f=>(g.auth.user.type===1?f:f.filter(i=>g.permission.includes(i.perm))).map((i,x)=>e.jsx("li",{children:i.subItems?e.jsx(u,{icon:e.jsx(S,{size:14}),name:i.name,items:i.subItems}):e.jsxs(p,{href:i.link,className:`flex items-center text-sm text-gray-600 gap-x-2 ${i.hide?"hidden":""}`,children:[e.jsx(S,{size:14}),e.jsx("span",{children:i.name})]})},x));return e.jsxs("li",{className:"h-full p-2",children:[e.jsxs("button",{type:"button",onClick:()=>j(!m),className:`w-full flex transition-all duration-300 space-x-2 text-sm items-center ${m?"mb-3":"mb-0"}`,children:[a,e.jsx("span",{children:o}),e.jsx(B,{className:`!ml-auto transition-all duration-300 ${m?"-rotate-90":"rotate-0"}`,size:12})]}),e.jsx("ul",{ref:h,className:"pl-5 space-y-2 overflow-hidden transition-all duration-300",style:{maxHeight:`${t}px`,transition:"max-height 0.3s ease"},children:w(l)})]})}const J=({user_type:a,usrrr:o})=>{var w,f,i,x,y,b,s,n,z,_,C;const[l,v]=r.useState([]),[m,j]=r.useState(!0),{props:t,url:d}=M();console.log("User Roles:",t.auth.user.roles),r.useEffect(()=>{Array.isArray(a)?v(a):console.error("Expected user_type to be an array:",a)},[a]);const h=[{name:"employees",link:"/employees",perm:"create_role"},{name:"leave management",link:"/leave-index",perm:"view_leave"},{name:"Loan Management",link:"/loans",perm:"view_employee"},{name:"Advance-Salary Management",link:"/advanceloan",perm:"view_employee"},{name:"employee setup",link:"/branches",perm:"create_role"},{name:"Salary generate",link:"/salaries",perm:"view_salary"},{name:"Attendance",link:"/attendance",perm:"view_employee"},{name:"Salary generator employee wise",link:"/all-salary",perm:"view_salary"},{name:"Salary deduction",link:"/deductions",perm:"view_employee"}],g=["view_employee","view_leaves","view_attendance"];return h.filter(A=>g.includes(A.permission)),e.jsx("nav",{className:"grid p-5 place-items-center",children:e.jsx("div",{className:m?"modal menu fixed transition delay-700 block duration-700 ease-in shadow-md bg-white w-[17%] justify-end slide-right-to-left left-0 bottom-0 top-0":"modal menu absolute hidden bg-gray-800 w-[10rem] duration-700 ease-in-out delay-700 justify-end bottom-0 top-0",children:e.jsxs("ul",{children:[e.jsx("div",{className:"p-2 logo",children:e.jsx("img",{src:"/SCS-01-removebg-preview.png",alt:"Description",className:"w-[85%]"})}),e.jsx("li",{className:d==="/dashboard"?"active bg-[#0A1B3F] p-2 px-5 text-[0.9rem] text-white":"p-2 text-black text-[0.9rem]",children:e.jsxs(p,{href:"/dashboard",className:"flex items-center space-x-2",children:[" ",e.jsxs("span",{children:[" ",e.jsx(F,{})]})," ",e.jsx("span",{children:"Dashboard"})," "]})}),(((w=t.auth.user.roles[0])==null?void 0:w.name)==="admin"||l.includes("view_employee"))&&e.jsx(u,{icon:e.jsx(R,{}),name:"HRMS & Payroll",items:h}),((f=t.auth.user.roles[0])==null?void 0:f.name)==="view_task"&&e.jsx("li",{className:d==="/Quotation"?"active bg-[#0A1B3F] p-2 px-5 text-[0.9rem] text-white":"p-2 text-black text-[0.9rem]",children:e.jsxs(p,{href:"/leave-index",className:"flex space-x-2",children:[" ",e.jsxs("span",{children:[" ",e.jsx(k,{})]})," ",e.jsx("span",{children:"Leave management"})," "]})}),((i=t.auth.user.roles[0])==null?void 0:i.name)==="admin"&&e.jsx(u,{icon:e.jsx(H,{}),name:"Account System",items:[{name:"Invoice",link:"/sales"},{name:"Income",link:"/income"},{name:"Expense",link:"/amc-expense-index",perm:"view_purchase"},{name:"Accounting Setup",link:"/tax",perm:"view_tax"}]}),((x=t.auth.user.roles[0])==null?void 0:x.name)==="admin"&&e.jsx(u,{icon:e.jsx(H,{}),name:"Work Order",items:[{name:"Client Work-Order",link:"/clients-workOrder"},{name:"Purchase Order",link:"/seller-work-orders"}]}),e.jsx(u,{icon:e.jsx(N,{}),name:"Project Management",items:[{name:"Timesheet",link:"/daily-status",perm:"view_employee",hide:!(((y=t.auth.user.roles[0])==null?void 0:y.name)==="admin"||l.includes("view_employee"))},{name:"Projects",link:"/projects-task",perm:"view_project",hide:!(l.includes("view_project")||((b=t.auth.user.roles[0])==null?void 0:b.name)==="admin")},{name:"Add Employee",link:"/task-assingbyadmin",perm:"view_employee"},{name:"Reports",link:"/reports-get"},{name:"project-stages",link:"/project-all-stages",hide:!(l.includes("view_project")||((s=t.auth.user.roles[0])==null?void 0:s.name)==="admin")}]}),l.includes("admin")||l.includes("view_employee")?e.jsx(u,{icon:e.jsx(D,{}),name:"Allowance",items:[{name:"Travel Allowance",link:"/travel-allowances",perm:"view_employee"},{name:"Food Allowance",link:"/food-allowances",perm:"view_employee"}]}):null,l.includes("admin")||l.includes("view_employee")?e.jsx(u,{icon:e.jsx(O,{}),name:"Holiday",items:[{name:"Holiday-location",link:"/holiday-locationswise",perm:"view_employee"},{name:"Holiday List",link:"/holidays-location",perm:"view_employee"},{name:"Holiday Calendar",link:"/holidays-calender",perm:"view_employee"}]}):null,((n=t.auth.user.roles[0])==null?void 0:n.name)==="admin"&&e.jsx(u,{icon:e.jsx(N,{}),name:"User Management",items:[{name:"Customer",link:"/clients"},{name:" Lead Stages",link:"/lead-stages",perm:"view_contracts"},{name:"Leads ",link:"/lead",perm:"view_leads"},{name:"Deals",link:"/deal",perm:"view_deals"}]}),((z=t.auth.user.roles[0])==null?void 0:z.name)==="admin"&&e.jsx(u,{icon:e.jsx(N,{}),name:"Invetory Management",items:[{name:"Services",link:"/product-services",perm:"view_service"}]}),((_=t.auth.user.roles[0])==null?void 0:_.name)==="admin"&&e.jsx("li",{className:d==="/roles-permission-details"?"active bg-[#0A1B3F] p-2 px-5 text-[0.9rem] text-white":"p-2 text-black text-[0.9rem]",children:e.jsxs(p,{href:"/roles-permission-details",className:"flex space-x-2",children:[" ",e.jsxs("span",{children:[" ",e.jsx(k,{})]})," ",e.jsx("span",{children:"Roles"})," "]})}),((C=t.auth.user.roles[0])==null?void 0:C.name)==="admin"&&e.jsx("li",{className:d==="/enquiry"?"active bg-[#0A1B3F] p-2 px-5 text-[0.9rem] text-white":"p-2 text-black text-[0.9rem]",children:e.jsxs(p,{href:"/enquiry",className:"flex space-x-2",children:[" ",e.jsxs("span",{children:[" ",e.jsx(V,{})]})," ",e.jsx("span",{children:"Enquiry"})," "]})}),l.includes("admin")||l.includes("view_employee")?e.jsx("li",{className:d==="/Quotation"?"active bg-[#0A1B3F] p-2 px-5 text-[0.9rem] text-white":"p-2 text-black text-[0.9rem]",children:e.jsxs(p,{href:"/Quotation",className:"flex space-x-2",children:[e.jsx("span",{children:e.jsx(k,{})}),e.jsx("span",{children:"Quotation"})]})}):""]})})})};function K(a){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216.4 163.7c5.1 5 5.1 13.3.1 18.4L155.8 243h231.3c7.1 0 12.9 5.8 12.9 13s-5.8 13-12.9 13H155.8l60.8 60.9c5 5.1 4.9 13.3-.1 18.4-5.1 5-13.2 5-18.3-.1l-82.4-83c-1.1-1.2-2-2.5-2.7-4.1-.7-1.6-1-3.3-1-5 0-3.4 1.3-6.6 3.7-9.1l82.4-83c4.9-5.2 13.1-5.3 18.2-.3z"},child:[]}]})(a)}function Y(a){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M255.8 112c-80.4 0-143.8 50.6-219.6 133.3-5.5 6.1-5.6 15.2-.1 21.3C101 338.3 158.2 400 255.8 400c96.4 0 168.7-77.7 220.1-134 5.3-5.8 5.6-14.6.5-20.7C424 181.8 351.5 112 255.8 112zm4.4 233.9c-53 2.4-96.6-41.2-94.1-94.1 2.1-46.2 39.5-83.6 85.7-85.7 53-2.4 96.6 41.2 94.1 94.1-2.1 46.2-39.5 83.6-85.7 85.7z"},child:[]},{tag:"path",attr:{d:"M256 209c0-6 1.1-11.7 3.1-16.9-1 0-2-.1-3.1-.1-36.9 0-66.6 31.4-63.8 68.9 2.4 31.3 27.6 56.5 58.9 58.9 37.5 2.8 68.9-26.9 68.9-63.8 0-1.3-.1-2.6-.1-3.9-5.6 2.5-11.7 3.9-18.2 3.9-25.2 0-45.7-21.1-45.7-47z"},child:[]}]})(a)}function L(a){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.7 403c-6.1 0-11.4 4.2-12.7 10.2-1 4.5-2.7 8.2-5 10.9-1.3 1.5-5.1 5.9-16.1 5.9-11 0-14.8-4.5-16.1-5.9-2.3-2.7-4-6.4-5-10.9-1.3-6-6.6-10.2-12.7-10.2-8.4 0-14.5 7.8-12.7 15.9 5 22.3 21 37.1 46.5 37.1s41.5-14.7 46.5-37.1c1.8-8.1-4.4-15.9-12.7-15.9zM412 352.2c-15.4-20.3-45.7-32.2-45.7-123.1 0-93.3-41.2-130.8-79.6-139.8-3.6-.9-6.2-2.1-6.2-5.9v-2.9c0-13.3-10.8-24.6-24-24.6h-.6c-13.2 0-24 11.3-24 24.6v2.9c0 3.7-2.6 5-6.2 5.9-38.5 9.1-79.6 46.5-79.6 139.8 0 90.9-30.3 102.7-45.7 123.1-9.9 13.1-.5 31.8 15.9 31.8h280.1c16.1 0 25.4-18.8 15.6-31.8zm-39 5.8H139.8c-3.8 0-5.8-4.4-3.3-7.3 7-8 14.7-18.5 21-33.4 9.6-22.6 14.3-51.5 14.3-88.2 0-37.3 7-66.5 20.9-86.8 12.4-18.2 27.9-25.1 38.7-27.6 8.4-2 14.4-5.8 18.6-10.5 3.2-3.6 8.7-3.8 11.9-.2 5.1 5.7 12 9.1 18.8 10.7 10.8 2.5 26.3 9.4 38.7 27.6 13.9 20.3 20.9 49.5 20.9 86.8 0 36.7 4.7 65.6 14.3 88.2 6.5 15.2 14.4 25.9 21.5 33.9 2.2 2.7.4 6.8-3.1 6.8z"},child:[]}]})(a)}function ee(a){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(a)}function ae(a){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432.8 136v96H122.3l84.4-86.2-33.2-33.8L32 256l141.5 144 33.2-33.8-84.4-86.2H480V136h-47.2z"},child:[]}]})(a)}function se(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"},child:[]},{tag:"path",attr:{d:"M16 16V8l-5 4zM9 8v8h2V8z"},child:[]}]})(a)}function U(a){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(a)}const te=({user:a,notif:o})=>{var y,b;const[l,v]=r.useState(!1),[m,j]=r.useState(!1),[t,d]=r.useState(0),h=r.useRef(null),g=r.useRef(null);r.useEffect(()=>{const s=(o==null?void 0:o.filter(n=>!n.read_at).length)||0;d(s)},[o]);const w=async s=>{try{await axios.post(`readta/${s}`),d(n=>Math.max(n-1,0))}catch(n){console.error("Error marking notification as read",n)}};r.useEffect(()=>{const s=n=>{h.current&&!h.current.contains(n.target)&&g.current&&!g.current.contains(n.target)&&(j(!1),v(!1))};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const f=s=>{s.stopPropagation(),v(n=>!n),j(!1)},i=s=>{s.stopPropagation(),j(n=>!n),v(!1)},{props:x}=M();return console.log(x),e.jsxs("div",{className:"w-full bg-[#fff] shadow-md p-2",children:[((y=x.auth.user.roles[0])==null?void 0:y.name)!=="admin"&&((b=x.auth.user.roles[0])==null?void 0:b.name)!=="customer"&&!x.auth.user.is_exe_login&&e.jsx("div",{className:"fixed flex items-center justify-center inset-0 z-50 bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full py-4 bg-white px-6 rounded",children:[e.jsx("div",{className:"text-2xl text-amber-600 font-bold flex justify-center",children:"!! Attention !!"}),e.jsxs("div",{className:"py-6 space-y-3 text-center",children:[e.jsx("h1",{className:"font-medium text-gray-600",children:"Please Login to the software or download and install into your machine and refresh the page!"}),e.jsxs("p",{className:"font-medium text-gray-600",children:[e.jsx("a",{download:"RSP Employee",href:"/software/rsp.msix",className:"text-blue-500 underline",children:"Click Here"})," ","To Download"]})]})]})}),e.jsx("div",{className:"flex justify-end p-2 nav header",children:e.jsxs("div",{className:"flex space-x-7",children:[e.jsxs("div",{className:"grid place-items-center",children:[e.jsxs("button",{className:"relative",onClick:f,children:[e.jsx(L,{className:`text-[1.5rem] ${t>0,""}`}),t>0&&e.jsx("span",{className:"absolute top-0 w-4 h-4 text-[0.6rem] text-white bg-red-500 border border-white rounded-full right-1 grid place-items-center",children:t})]}),e.jsx("div",{ref:g,className:`fixed top-0 z-30 right-0 border flex justify-end border-gray-300 w-full h-full bg-black/60 transition-all duration-300 ${l?"opacity-100 pointer-events-auto":"opacity-0 delay-300 pointer-events-none"}`,children:e.jsxs("div",{className:"bg-white scrollbar-thumb-sky-700 scrollbar-track-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-3",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Notifications"}),e.jsx("button",{onClick:f,children:e.jsx(E,{size:16})})]}),e.jsx("div",{className:"h-[30rem] w-[20rem] space-y-3 overflow-y-scroll bg-white scrollbar-thin scrollbar-thumb-sky-700 scrollbar-track-white",children:o==null?void 0:o.map(s=>e.jsxs("a",{onClick:()=>w(s.id),href:s.data.url,className:"flex items-center w-full p-2.5 gap-x-4 hover:bg-gray-100 shadow-md shadow-gray-200 rounded",children:[e.jsx("div",{className:"border border-gray-200 p-1.5 rounded-full",children:e.jsx(U,{size:18,className:"text-green-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:s.data.project}),e.jsx("span",{className:"font-semibold text-blue-500",children:s.data.employee_id}),e.jsx("span",{className:"text-sm text-gray-700",children:s.data.message})]}),!s.read_at&&e.jsx("span",{className:"bg-red-500 w-1.5 h-1.5 rounded-full ml-auto"})]},s.id))}),e.jsx("div",{className:"p-5",children:e.jsxs(p,{href:"/notifications-get",className:"flex items-center justify-center w-full py-2 text-sm text-center text-white bg-blue-500 rounded",children:[e.jsx(L,{className:"text-[1.5rem]"}),e.jsx("span",{children:"See All Notifications"})]})})]})})]}),e.jsxs("div",{className:"flex space-x-2 cursor-pointer",onClick:i,children:[e.jsx("span",{className:"grid place-items-center",children:e.jsx(I,{className:"text-[1.5rem]"})}),e.jsx("span",{className:"text-[1rem]",children:a})]}),e.jsx("div",{className:"relative grid place-items-center",children:e.jsx("div",{ref:h,className:`absolute top-full p-4 -right-5 my-5 border border-gray-300 rounded w-[10rem] bg-white shadow-lg transition-all duration-300 shadow-zinc-800/50 ${m?"opacity-100 pointer-events-auto translate-y-0":"opacity-0 pointer-events-none translate-y-14"}`,children:e.jsxs("div",{children:[e.jsxs("li",{className:"p-2 text-black list-none flex space-x-2",children:[e.jsx("span",{className:"grid place-items-center",children:e.jsx(P,{})}),e.jsx("span",{children:e.jsx(p,{href:"/profile",children:"Profile"})})]}),e.jsx("li",{className:"p-2 text-black list-none",children:e.jsxs($,{method:"post",href:route("logout"),as:"button",className:"flex space-x-2",children:[e.jsx("span",{className:"grid mt-1 place-items-center",children:e.jsx(T,{})}),e.jsx("span",{children:"Log Out"})]})})]})})})]})})]})};export{se as B,te as H,ae as I,X as M,J as N,Y as a,K as b,ee as c,U as d,Z as e};
